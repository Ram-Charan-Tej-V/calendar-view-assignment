"use strict";(self.webpackChunkcalendar_component_starter=self.webpackChunkcalendar_component_starter||[]).push([[374],{"./src/components/Calendar/CalendarView.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,EmptyState:()=>EmptyState,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CalendarView_stories});var react=__webpack_require__("./node_modules/react/index.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var isSameDay=function isSameDay(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()};function r(e){var t,f,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const clsx_m=function clsx(){for(var e,t,f=0,n="";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n};var CalendarCell=react.memo(function CalendarCell(_ref){var date=_ref.date,inMonth=_ref.inMonth,events=_ref.events,isToday=_ref.isToday,_onClick=_ref.onClick,onEventClick=_ref.onEventClick,_ref$isSelected=_ref.isSelected,isSelected=void 0!==_ref$isSelected&&_ref$isSelected,eventPreview=(0,react.useMemo)(function(){return events.slice(0,3)},[events]),extraCount=Math.max(0,events.length-3),handleKeyDown=(0,react.useCallback)(function(ev){"Enter"!==ev.key&&" "!==ev.key||(ev.preventDefault(),_onClick(date))},[date,_onClick]);return react.createElement("div",{role:"button",tabIndex:0,"aria-label":"".concat(date.toDateString(),". ").concat(events.length," events."),"aria-pressed":isSelected,onKeyDown:handleKeyDown,onClick:function onClick(){return _onClick(date)},className:clsx_m("border border-neutral-200 h-32 p-2 hover:bg-neutral-50 transition-colors cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500",!inMonth&&"text-neutral-400 bg-neutral-50")},react.createElement("div",{className:"flex justify-between items-start mb-1"},react.createElement("span",{className:"text-sm font-medium text-neutral-900"},date.getDate()),isToday&&react.createElement("span",{className:"w-6 h-6 bg-primary-500 rounded-full text-white text-xs flex items-center justify-center"},date.getDate())),react.createElement("div",{className:"space-y-1 overflow-hidden"},eventPreview.map(function(ev){var _ev$color,_ev$description;return react.createElement("div",{key:ev.id,role:"button",tabIndex:0,onClick:function onClick(e){e.stopPropagation(),onEventClick(ev)},onKeyDown:function onKeyDown(e){"Enter"===e.key&&(e.stopPropagation(),onEventClick(ev))},className:"text-xs px-2 py-1 rounded truncate",style:{backgroundColor:null!==(_ev$color=ev.color)&&void 0!==_ev$color?_ev$color:"#3b82f6"},title:"".concat(ev.title," â€” ").concat(null!==(_ev$description=ev.description)&&void 0!==_ev$description?_ev$description:"")},ev.title)}),extraCount>0&&react.createElement("button",{onClick:function onClick(e){e.stopPropagation(),_onClick(date)},className:"text-xs text-primary-600 hover:underline","aria-label":"".concat(extraCount," more events")},"+",extraCount," more")))});CalendarCell.__docgenInfo={description:"",methods:[],displayName:"CalendarCell",props:{date:{required:!0,tsType:{name:"Date"},description:""},inMonth:{required:!0,tsType:{name:"boolean"},description:""},events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},isToday:{required:!0,tsType:{name:"boolean"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},onEventClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"e"}],return:{name:"void"}}},description:""}}};var MonthView=function MonthView(_ref){var date=_ref.date,events=_ref.events,onDayClick=_ref.onDayClick,onEventClick=_ref.onEventClick,grid=function getCalendarGrid(date){var year=date.getFullYear(),month=date.getMonth(),firstDay=new Date(year,month,1),startDay=firstDay.getDay(),startDate=new Date(firstDay);startDate.setDate(firstDay.getDate()-startDay);for(var grid=[],i=0;i<42;i++)grid.push(new Date(startDate)),startDate.setDate(startDate.getDate()+1);return grid}(date),today=new Date;return react.createElement("div",{className:"w-full"},react.createElement("div",{className:"grid grid-cols-7 gap-1"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(function(d){return react.createElement("div",{key:d,className:"text-xs font-semibold text-neutral-600 py-2 text-center"},d)})),react.createElement("div",{className:"grid grid-cols-7 gap-1"},grid.map(function(d){var inMonth=d.getMonth()===date.getMonth(),dayEvents=function eventsByDay(d){return events.filter(function(ev){return isSameDay(ev.startDate,d)})}(d),isToday=isSameDay(d,today);return react.createElement(CalendarCell,{key:d.toISOString(),date:d,inMonth,events:dayEvents,isToday,onClick:onDayClick,onEventClick})})))};function CalendarView_slicedToArray(r,e){return function CalendarView_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function CalendarView_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function CalendarView_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return CalendarView_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?CalendarView_arrayLikeToArray(r,a):void 0}}(r,e)||function CalendarView_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CalendarView_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}MonthView.__docgenInfo={description:"",methods:[],displayName:"MonthView",props:{date:{required:!0,tsType:{name:"Date"},description:""},events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},onDayClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},onEventClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"event"}],return:{name:"void"}}},description:""}}};var EventModal=react.lazy(function(){return __webpack_require__.e(447).then(__webpack_require__.bind(__webpack_require__,"./src/components/Calendar/EventModal.tsx")).then(function(m){return{default:m.EventModal}})}),CalendarView=function CalendarView(_ref){var events=_ref.events,onEventAdd=_ref.onEventAdd,onEventUpdate=_ref.onEventUpdate,onEventDelete=_ref.onEventDelete,_ref$initialView=_ref.initialView,initialView=void 0===_ref$initialView?"month":_ref$initialView,_ref$initialDate=_ref.initialDate,_useCalendar=function useCalendar(){var initialDate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,initialView=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month",_useState2=_slicedToArray((0,react.useState)(initialDate),2),currentDate=_useState2[0],setCurrentDate=_useState2[1],_useState4=_slicedToArray((0,react.useState)(initialView),2),view=_useState4[0],setView=_useState4[1],goToNextMonth=(0,react.useCallback)(function(){setCurrentDate(function(prev){return new Date(prev.getFullYear(),prev.getMonth()+1,1)})},[]),goToPreviousMonth=(0,react.useCallback)(function(){setCurrentDate(function(prev){return new Date(prev.getFullYear(),prev.getMonth()-1,1)})},[]),goToToday=(0,react.useCallback)(function(){setCurrentDate(function(){return new Date})},[]);return{currentDate,view,setView,setMonth:(0,react.useCallback)(function(year,month){setCurrentDate(new Date(year,month,1))},[]),goToNextMonth,goToPreviousMonth,goToToday}}(void 0===_ref$initialDate?new Date:_ref$initialDate,initialView),currentDate=_useCalendar.currentDate,view=_useCalendar.view,setView=_useCalendar.setView,goToNextMonth=_useCalendar.goToNextMonth,goToPreviousMonth=_useCalendar.goToPreviousMonth,goToToday=_useCalendar.goToToday,_useState2=CalendarView_slicedToArray((0,react.useState)(!1),2),modalOpen=_useState2[0],setModalOpen=_useState2[1],_useState4=CalendarView_slicedToArray((0,react.useState)(void 0),2),editing=_useState4[0],setEditing=_useState4[1],eventsByDate=(0,react.useMemo)(function(){return events},[events]),handleDayClick=(0,react.useCallback)(function(date){setEditing({id:"",title:"",startDate:date,endDate:new Date(date.getTime()+36e5)}),setModalOpen(!0)},[]),handleEventClick=(0,react.useCallback)(function(ev){setEditing(ev),setModalOpen(!0)},[]),handleSave=(0,react.useCallback)(function(ev){null!=editing&&editing.id?onEventUpdate(editing.id,ev):onEventAdd(ev)},[onEventAdd,onEventUpdate,editing]),handleDelete=(0,react.useCallback)(function(id){onEventDelete(id)},[onEventDelete]);return react.createElement("div",{className:"p-4"},react.createElement("div",{className:"flex items-center justify-between mb-4"},react.createElement("div",{className:"flex items-center gap-2"},react.createElement("button",{onClick:goToPreviousMonth,className:"px-3 py-1 rounded border"},"Prev"),react.createElement("button",{onClick:goToToday,className:"px-3 py-1 rounded border"},"Today"),react.createElement("button",{onClick:goToNextMonth,className:"px-3 py-1 rounded border"},"Next")),react.createElement("div",{className:"flex items-center gap-2"},react.createElement("div",{className:"text-lg font-semibold"},currentDate.toLocaleString(void 0,{month:"long",year:"numeric"})),react.createElement("select",{"aria-label":"view-toggle",value:view,onChange:function onChange(e){return setView(e.target.value)},className:"border px-2 py-1 rounded"},react.createElement("option",{value:"month"},"Month"),react.createElement("option",{value:"week"},"Week")))),"month"===view&&react.createElement(MonthView,{date:currentDate,events:eventsByDate,onDayClick:handleDayClick,onEventClick:handleEventClick}),"week"===view&&react.createElement("div",{className:"text-sm text-neutral-600"},"Week view coming soon"),react.createElement(react.Suspense,{fallback:null},react.createElement(EventModal,{open:modalOpen,initial:editing,onClose:function onClose(){return setModalOpen(!1)},onSave:handleSave,onDelete:handleDelete})))};function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return CalendarView_stories_arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||CalendarView_stories_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CalendarView_stories_slicedToArray(r,e){return function CalendarView_stories_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function CalendarView_stories_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||CalendarView_stories_unsupportedIterableToArray(r,e)||function CalendarView_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CalendarView_stories_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return CalendarView_stories_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?CalendarView_stories_arrayLikeToArray(r,a):void 0}}function CalendarView_stories_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}CalendarView.__docgenInfo={description:"",methods:[],displayName:"CalendarView",props:{events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},onEventAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"event"}],return:{name:"void"}}},description:""},onEventUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, updates: Partial<CalendarEvent>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"CalendarEvent"}],raw:"Partial<CalendarEvent>"},name:"updates"}],return:{name:"void"}}},description:""},onEventDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},initialView:{required:!1,tsType:{name:"union",raw:'"month" | "week"',elements:[{name:"literal",value:'"month"'},{name:"literal",value:'"week"'}]},description:"",defaultValue:{value:'"month"',computed:!1}},initialDate:{required:!1,tsType:{name:"Date"},description:"",defaultValue:{value:"new Date()",computed:!1}}}};const CalendarView_stories={title:"Components/Calendar/CalendarView",component:CalendarView};var sampleEvents=[{id:"evt-1",title:"Team Standup",description:"Daily sync",startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),15,9,0),endDate:new Date((new Date).getFullYear(),(new Date).getMonth(),15,9,30),color:"#3b82f6",category:"Meeting"},{id:"evt-2",title:"Design Review",startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),16,14,0),endDate:new Date((new Date).getFullYear(),(new Date).getMonth(),16,15,30),color:"#10b981",category:"Design"}],Default={render:function render(){var _useState2=CalendarView_stories_slicedToArray((0,react.useState)(sampleEvents),2),events=_useState2[0],setEvents=_useState2[1];return react.createElement("div",{style:{maxWidth:1100}},react.createElement(CalendarView,{events,onEventAdd:function onEventAdd(ev){return setEvents(function(prev){return[].concat(_toConsumableArray(prev),[ev])})},onEventUpdate:function onEventUpdate(id,updates){return setEvents(function(prev){return prev.map(function(p){return p.id===id?_objectSpread(_objectSpread({},p),updates):p})})},onEventDelete:function onEventDelete(id){return setEvents(function(prev){return prev.filter(function(p){return p.id!==id})})}}))}},EmptyState={render:function render(){var _useState4=CalendarView_stories_slicedToArray((0,react.useState)([]),2),events=_useState4[0],setEvents=_useState4[1];return react.createElement("div",{style:{maxWidth:1100}},react.createElement(CalendarView,{events,onEventAdd:function onEventAdd(ev){return setEvents([ev])},onEventUpdate:function onEventUpdate(){},onEventDelete:function onEventDelete(){}}))}};const __namedExportsOrder=["Default","EmptyState"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const [events, setEvents] = useState<CalendarEvent[]>(sampleEvents);\n    return <div style={{\n      maxWidth: 1100\n    }}>\r\n        <CalendarView events={events} onEventAdd={ev => setEvents(prev => [...prev, ev])} onEventUpdate={(id, updates) => setEvents(prev => prev.map(p => p.id === id ? {\n        ...p,\n        ...updates\n      } : p))} onEventDelete={id => setEvents(prev => prev.filter(p => p.id !== id))} />\r\n      </div>;\n  }\n}",...Default.parameters?.docs?.source}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const [events, setEvents] = useState<CalendarEvent[]>([]);\n    return <div style={{\n      maxWidth: 1100\n    }}>\r\n        <CalendarView events={events} onEventAdd={ev => setEvents([ev])} onEventUpdate={() => {}} onEventDelete={() => {}} />\r\n      </div>;\n  }\n}",...EmptyState.parameters?.docs?.source}}}}}]);